<!DOCTYPE html>
<html>
<head>
  <title>Tea Region Analytics Dashboard</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }
    .region-card {
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 15px;
      margin-bottom: 25px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .region-title {
      font-size: 20px;
      font-weight: bold;
      margin-bottom: 10px;
    }
    iframe {
      width: 100%;
      height: 300px;
      border: 0;
    }
  </style>
</head>
<body>

<h1>Tea Region Prediction Statistics</h1>

{% for r in regions %}
  <div class="region-card">
    <div class="region-title">{{ r.display_name }}</div>

    <p><b>Total predictions:</b> {{ r.total }}</p>
    <p><b>Accepted:</b> {{ r.accepted }}</p>
    <p><b>Rejected:</b> {{ r.rejected }}</p>
    <p><b>Average confidence:</b> {{ r.avg_confidence }}</p>

    {% if r.map_url %}
      <iframe src="{{ r.map_url }}" loading="lazy"></iframe>
    {% else %}
      <p>No map available for this region.</p>
    {% endif %}
  </div>
{% else %}
  <p>No prediction data available yet.</p>
{% endfor %}

</body>
</html>